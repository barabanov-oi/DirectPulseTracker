/* cronstrue - Convert cron expressions into human readable descriptions
 * https://github.com/bradymholt/cRonstrue
 * Copyright (c) 2023 Brady Holt
 * Licensed under the MIT License */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).cronstrue=t()}(this,function(){"use strict";function i(e,t){var n=t||{},r=n.throwExceptionOnParseError,i=void 0===r||r,o=n.verbose,s=void 0!==o&&o,a=n.monthStartsAtOne,u=void 0===a||a,c=n.dayStartsAtOne,d=void 0===c||c,l=n.use24HourTimeFormat,h=void 0!==l&&l,f=n.descriptions,m=void 0===f?null:f;this.throwExceptionOnParseError=i,this.verbose=s,this.monthStartsAtOne=u,this.dayStartsAtOne=d,this.use24HourTimeFormat=h,this.descriptions=null===m?new function(e){e=e||{};var t=e.locale||"en";this.use24HourTimeFormat=e.use24HourTimeFormat,this.am="am",this.pm="pm",this.atX0SecondsPastTheMinuteGrammarName="at",this.atX0MinutesPastTheHourGrammarName="at",this.commaEveryX0DaysOfTheWeek="en"==t?", every":", each",this.commaEvery="en"==t?", every":", each",this.commaAndTheMinute=", and on minute",this.commaAndTheHour=", and on hour",this.commaBetweenDayX0AndX1OfTheMonth=", between days",this.commaOnTheLastDayOfTheMonth=", on the last day of the month",this.commaOnTheLastWeekdayOfTheMonth=", on the last weekday of the month",this.commaOnTheLastX0OfTheMonth=", on the last %s of the month",this.commaOnTheX0OfTheMonth=", on the %s of the month",this.commaX0ThroughX1=", %s through %s",this.commaX0AfterMinute=", %s after the minute",this.commaX0AfterHour=", %s after the hour",this.everyHour="every hour",this.everyMinute="every minute",this.everyMinuteBetweenX0AndX1="every minute between %s and %s",this.everySecond="every second",this.everyX0Days="every %s days",this.everyX0DaysOfTheWeek="every %s days of the week",this.everyX0Months="every %s months",this.everyX0Years="every %s years",this.everyXminutesOfTheHour="every %s minutes of the hour",this.everyMinuteEveryHourOfTheDay="every minute of every hour",this.everyX0Years="every %s years",this.fifthWeekday="fifth weekday",this.fifth="fifth",this.firstWeekday="first weekday",this.first="first",this.fourthWeekday="fourth weekday",this.fourth="fourth",this.minutesX0ThroughX1PastTheHour="minutes %s through %s past the hour",this.secondsX0ThroughX1PastTheMinute="seconds %s through %s past the minute",this.onDayX0OfTheMonth="on day %s of the month",this.onTheX0OfTheMonth="on the %s of the month",this.onTheLastDayOfTheMonth="on the last day of the month",this.onTheLastWeekdayOfTheMonth="on the last weekday of the month",this.onTheLastX0OfTheMonth="on the last %s of the month",this.onX0MinutesPastTheHour="on %s minutes past the hour",this.onX0AfterHour="on %s after the hour",this.onX0AfterMinute="on %s after the minute",this.onX0SecondsPastTheMinute="on %s seconds past the minute",this.secondWeekday="second weekday",this.second="second",this.thirdWeekday="third weekday",this.third="third",this.weekdayNearestDayX0="weekday nearest day %s",this.weekdayNearestTheX0="weekday nearest the %s",this.yearsRange="years %s-%s",this.yesterday="yesterday",this.today="today",this.tomorrow="tomorrow",this.weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],this.timeNoon="noon",this.timeUntilMomentDescription="until",this.timeFromMomentDescription="from",this.timeAtMomentDescription="at",this.timePeriods=["am","pm"],this.time=function(e){if(void 0!==this.use24HourTimeFormat&&this.use24HourTimeFormat)return e;if(12==e)return this.timeNoon;if(0==e)return"12"+this.timePeriods[0];if(e>12)return e-12+this.timePeriods[1];return e+this.timePeriods[0]},this.dayOfMonthText="day"===t&&e.dayOfMonthRank?e.dayOfMonthRank:function(e){switch(e){case"1":return"the "+this.first;case"2":return"the "+this.second;case"3":return"the "+this.third;case"4":return"the "+this.fourth;case"5":return"the "+this.fifth;case"L-1":return"the second to last";case"L-2":return"the third to last";case"L-3":return"the fourth to last";case"L-4":return"the fifth to last";default:return e}}}(n):m,this.specialCharacters=["/","-",",","*"]}function e(){return new i}function t(e,t){return t=t||{},new i(e,t).getDescription(t.locale)}function n(e,t){return t=t||{},new i(e,t).getNextOccurrence(t.currentDate)}var r={CronExpression:"",UTC:"UTC",Locale:{de:"de_DE",en:"en_US",es:"es_ES",fr:"fr_FR",it:"it_IT",nb:"nb_NO",nl:"nl_NL",pl:"pl_PL",pt_BR:"pt_BR",ro:"ro_RO",ru:"ru_RU",sk:"sk_SK",sv:"sv_SE",tr:"tr_TR",uk:"uk_UA",zh_CN:"zh_CN",zh_TW:"zh_TW"}};function o(){this.dayOfWeekStartIndexZero=!0,this.monthStartIndexZero=!1,this.ordinalIndicator=["th","st","nd","rd","th","th","th","th","th","th"]}return i.locales={en:new o},i.prototype.atX0SecondsPastTheMinuteGrammar=function(){return this.descriptions.atX0SecondsPastTheMinuteGrammarName},i.prototype.atX0MinutesPastTheHourGrammar=function(){return this.descriptions.atX0MinutesPastTheHourGrammarName},i.prototype.getNextOccurrence=function(e){if(!this.expressionParts){throw new Error("Missing expression parts")}if(!Date.prototype.addDays||!Date.prototype.addMonths||!Date.prototype.addYears){throw new Error("Date prototype methods not found. Consider using a shim library like 'date-extensions' or 'date-shim'")}var t=this.expressionParts;e=e||new Date;var n,r,i;try{n=parseInt(t[0]),r=parseInt(t[1]),i=parseInt(t[2])}catch(e){throw e}var o=parseInt(t[3]),s=parseInt(t[4]);return e.addYears(o),e.addMonths(s),e.addDays(i),e.addHours(r),e.addMinutes(n),e},i.prototype.getDescription=function(e){try{var t=e||r.Locale.en;t=t.toLowerCase();var n=t.split("_")[0];if(this.expressionParts=void 0===this.expressionParts?this.expression?this.expression.split(" "):["0","0","00","*","*","*"]:this.expressionParts,6!=this.expressionParts.length&&7!=this.expressionParts.length)throw new Error("Invalid cron expression");var i=this.getTimeOfDayDescription(),o=this.getDayOfMonthDescription(),s=this.getMonthDescription(),a=this.getDayOfWeekDescription(),u=this.getYearDescription();return 6==this.expressionParts.length?i+" "+a+", "+o+" "+s+u:i+" "+a+" "+u}catch(e){if(this.throwExceptionOnParseError)throw"Error: "+e.message;return e.message}},i.prototype.getTimeOfDayDescription=function(){var e=this.expressionParts[0],t=this.expressionParts[1],n=this.expressionParts[2],r=[];return"0"==e&&"0"==t&&"0"==n?this.descriptions.timeAtMomentDescription+" "+this.descriptions.timeNoon:("0"==e&&"0"==t?this.descriptions.timeAtMomentDescription+" "+this.formatTime(n,0,0):r.push(this.getSecondsDescription()),r.push(this.getMinutesDescription()),r.push(this.getHoursDescription()),r.join(", ").replace(", "+this.descriptions.timeAtMomentDescription+" ",", "))},i.prototype.getSecondsDescription=function(){var e=this.expressionParts[0],t="";if("*"==e)return"";if(t=this.getSegmentDescription(e,this.descriptions.onX0SecondsPastTheMinute,function(e){return e},function(e){return e},function(e,t,n,r){return this.descriptions.onX0AfterMinute.replace("%s",n).replace(", "+this.descriptions.atX0SecondsPastTheMinuteGrammar(),"")}.bind(this)),t)return t;if("0/1"==e)return this.descriptions.everySecond;var n=e.indexOf("-"),r=e.indexOf("/");return-1==r&&-1==n?this.atX0SecondsPastTheMinuteGrammar()+" "+e:"*/1"==e?this.descriptions.everySecond:e.indexOf("*/")==-1&&e.indexOf("0/")==-1&&-1!=r?this.descriptions.onX0AfterMinute.replace("%s",this.descriptions.everyX0Seconds.replace("%s",e.substring(r+1))):-1!=n&&-1==r?this.descriptions.secondsX0ThroughX1PastTheMinute.replace("%s",e.substring(0,n)).replace("%s",e.substring(n+1)):a=this.descriptions.everyX0Seconds.replace("%s",e.substring(r+1))},i.prototype.getMinutesDescription=function(){var e=this.expressionParts[1],t="";if("*"==e)return"";if(t=this.getSegmentDescription(e,this.descriptions.onX0MinutesPastTheHour,function(e){return e},function(e){return e},function(e,t,n,r){return this.descriptions.onX0AfterHour.replace("%s",n).replace(", "+this.descriptions.atX0MinutesPastTheHourGrammar(),"")}.bind(this)),t)return t;var n=e.indexOf("-"),r=e.indexOf("/");if(-1==r&&-1==n)return"0"==e?"":" "+this.atX0MinutesPastTheHourGrammar()+" "+e;if("*/1"==e||"0/1"==e)return this.descriptions.everyMinute;if(e.indexOf("*/")==-1&&e.indexOf("0/")==-1&&-1!=r){var i=e.substring(r+1);return this.descriptions.onX0AfterHour.replace("%s",this.descriptions.everyXminutesOfTheHour.replace("%s",i))}if(-1!=n&&-1==r){var o=parseInt(e.substring(0,n)),s=parseInt(e.substring(n+1));return"0"==this.expressionParts[0]?this.descriptions.everyMinuteBetweenX0AndX1.replace("%s",this.formatTime(o,0,0)).replace("%s",this.formatTime(s,0,0)):this.descriptions.minutesX0ThroughX1PastTheHour.replace("%s",e.substring(0,n)).replace("%s",e.substring(n+1))}var a="";return a=e.indexOf("*/")>-1?this.descriptions.everyXminutesOfTheHour.replace("%s",e.substring(e.indexOf("/")+1)):this.descriptions.everyXminutes.replace("%s",e.substring(e.indexOf("/")+1))},i.prototype.getHoursDescription=function(){var e=this.expressionParts[2],t="";if("*"==e)return"";if(t=this.getSegmentDescription(e,this.descriptions.commaAndTheHour.replace(", ",", and "),function(e){return this.formatTime(0,e,0)}.bind(this),function(e){return e},null),t)return t;var n=e.indexOf("-"),r=e.indexOf("/");if(-1==n&&-1==r)return"0"==this.expressionParts[0]&&"0"==this.expressionParts[1]?this.descriptions.timeAtMomentDescription+" "+this.formatTime(parseInt(e),0,0):" "+this.descriptions.commaAndTheHour+", "+this.formatTime(parseInt(e),0,0);if("*/1"==e||"0/1"==e)return this.descriptions.everyHour;var i=this.formatTime(0,e.substring(r+1),0);return-1!=e.indexOf("*/")&&i||e.indexOf("0/")>-1&&i?this.descriptions.everyHour:e.indexOf("*/")==-1&&e.indexOf("0/")==-1&&r>-1?this.descriptions.commaAndTheHour+", "+this.descriptions.commaX0AfterHour.replace("%s",i):-1!=n&&-1==r?this.formatTime(0,e.substring(0,n),0)+" "+this.descriptions.timeUntilMomentDescription+" "+this.formatTime(0,e.substring(n+1),0):this.descriptions.everyXhours.replace("%s",e.substring(r+1))},i.prototype.getDayOfWeekDescription=function(){var e=this.expressionParts[5],t="",n=null;try{n="7"===e?"0":e}catch(e){}if("*"==e)return"";if(t=this.getSegmentDescription(e,this.descriptions.commaEveryX0DaysOfTheWeek.replace(", ",""),function(e){var t=e;return 0==t&&this.descriptions.weekdays&&this.descriptions.weekdays.length>7&&(t=7),0==t?7:t}.bind(this),function(e){try{var t=parseInt(e);if(t>=1&&t<=7){var n=t,r=n;if(!this.dayOfWeekStartIndexZero)return this.descriptions.weekdays[n-1]}return e}catch(e){return e}}.bind(this),null),t)return t;if("L"==e)return" "+this.descriptions.weekdays[6];var r=e.indexOf("-"),i=e.indexOf("/"),o=e.indexOf("#");if(-1==r&&-1==i&&-1==o){var s=parseInt(e);if(isNaN(s))return e;if(s>=0||s<=6){var a=s;if(!this.dayOfWeekStartIndexZero)if(0==a)a=7;else if(7==a&&this.dayOfWeekStartIndexZero)a=0;return" "+this.descriptions.commaOnX0.replace(", "," ").replace("%s",this.descriptions.weekdays[a])}}if(-1!=o)if(r==i){var u=parseInt(e.substring(0,o)),c=parseInt(e.substring(o+1)),d=u;if(!this.dayOfWeekStartIndexZero)if(0==u)d=7;return" "+this.descriptions.commaOnTheX0OfTheMonth.replace(", "," ").replace("%s",this.descriptions[this.getOrdinalValue(c)]+" "+this.descriptions.weekdays[d])}var l=this.descriptions.commaAndX0ThroughX1.replace(", ","and ");return-1!=r&&-1==i?l.replace("%s",this.descriptions.weekdays[parseInt(e.substring(0,r))])+" "+this.descriptions.timeUntilMomentDescription+" "+this.descriptions.weekdays[parseInt(e.substring(r+1))]:-1==r&&-1!=i?parseInt(e.substring(0,i))+" "+this.descriptions.timeUntilMomentDescription+" "+this.descriptions.weekdays.length+" "+this.descriptions.timeFromMomentDescription+" "+parseInt(e.substring(i+1))+" "+this.descriptions.days:this.descriptions.commaEveryX0DaysOfTheWeek.replace("%s",e.substring(i+1))},i.prototype.getMonthDescription=function(){var e=this.expressionParts[4],t="";if("*"==e)return"";if(t=this.getSegmentDescription(e,this.descriptions.commaEveryX0Months.replace(", "," "),function(e){return e},function(e){try{var t=parseInt(e);if(0<t&&t<=12)return this.monthStartIndexZero?this.descriptions.months[t-1]:this.descriptions.months[t]}catch(e){}return e}.bind(this),null),t)return t;var n=e.indexOf("-"),r=e.indexOf("/");if(-1==n&&-1==r)return" "+this.descriptions.commaOnX0.replace(", "," ").replace("%s",this.getMonthName(parseInt(e)));if(-1!=n&&-1==r){var i=parseInt(e.substring(0,n)),o=parseInt(e.substring(n+1));return" "+this.descriptions.commaX0ThroughX1.replace(", "," ").replace("%s",this.getMonthName(i)).replace("%s",this.getMonthName(o))}return e.indexOf("/")>-1?e.indexOf("*/")==-1&&e.indexOf("1/")?" "+this.descriptions.commaEveryX0MonthsStartingInX1.replace("%s",e.substring(r+1)).replace("%s",this.getMonthName(parseInt(e.substring(0,r)))):" "+this.descriptions.commaEveryX0Months.replace("%s",e.substring(r+1)):void 0},i.prototype.getYearDescription=function(){var e=this.expressionParts[6],t="";if("*"==e)return"";if(t=this.getSegmentDescription(e,", "+this.descriptions.commaEveryX0Years,function(e){return parseInt(e)},function(e){return e},null),t)return t;var n=e.indexOf("-"),r=e.indexOf("/");return-1==n&&-1==r?", "+this.descriptions.commaOnlyInX0.replace(", "," ").replace("%s",e):-1!=n&&-1==r?", "+this.descriptions.commaX0ThroughX1.replace(", "," ").replace("%s",parseInt(e.substring(0,n))).replace("%s",parseInt(e.substring(n+1))):e.indexOf("/")==-1?", "+this.descriptions.commaEveryX0Years.replace("%s",e.substring(r+1)):void 0},i.prototype.getDayOfMonthDescription=function(){var e=this.expressionParts[3],t=this.expressionParts[5],n="",r=null,i=e;if("?"==e)i="*";else if("*"!=e&&"L"!=e&&"LW"!=e&&"W"!=e&&i.indexOf("/"))try{var o=parseInt(e);if(isNaN(o))throw Error("NaN");if(r=o.toString(),o<=0&&(r=""),this.dayStartsAtOne&&o>0&&(i=""+(o-1)),!this.monthStartsAtOne&&"1"==t){var s=parseInt(e);if(1==s&&(i="2"),2==s&&(i="3"),3==s&&(i="4"),4==s&&(i="5"),5==s&&(i="6"),6==s&&(i="0"),"L"==e)i=t}}catch(e){}if("*"==i)return"";if(n=this.getSegmentDescription(i,this.descriptions.commaEveryDay,function(e){return e},function(e){return e},function(e,t,n,r){var i=e.substr(e.indexOf("W")-1,1);return r?(this.descriptions.commaOnTheX0OfTheMonth.replace(", "," ").replace("%s",this.descriptions.weekdayNearestDayX0).replace("%s",i)+", "+t):(this.descriptions.commaOnTheX0OfTheMonth.replace(", "," ").replace("%s",this.descriptions.weekdayNearestDayX0).replace("%s",i))}.bind(this)),n)return n;var a=i.indexOf("-"),u=i.indexOf("/"),c=i.indexOf("W"),d=i.indexOf("L");return-1==a&&-1==u&&-1==c&&-1==d?"L"==i?" "+this.descriptions.commaOnTheLastDayOfTheMonth.replace(", "," "):"LW"==i?" "+this.descriptions.commaOnTheLastWeekdayOfTheMonth.replace(", "," "):" "+this.descriptions.commaOnDayX0OfTheMonth.replace(", "," ").replace("%s",r||i):-1!=c&&-1==a&&-1==u?1==i.length?this.descriptions.commaOnTheX0OfTheMonth.replace(", "," ").replace("%s",this.descriptions.firstWeekday):this.descriptions.commaOnTheX0OfTheMonth.replace(", "," ").replace("%s",this.descriptions.weekdayNearestDayX0).replace("%s",i.substring(0,c)):-1!=d&&-1==a&&-1==u?this.descriptions.commaOnTheLastX0OfTheMonth.replace(", "," ").replace("%s",this.descriptions.weekdays[i.substring(0,d)]?this.descriptions.weekdays[i.substring(0,d)]:i.substring(0,d)):-1!=a&&-1==u?this.descriptions.commaBetweenDayX0AndX1OfTheMonth.replace(", "," ").replace("%s",i.substring(0,a)).replace("%s",i.substring(a+1)):-1==a&&-1!=u?i.indexOf("1/")<0?this.descriptions.commaOnDayX0OfTheMonthStartingOnX1.replace("%s",i.substring(u+1)).replace("%s",i.substring(0,u)):" "+this.descriptions.commaEveryX0Days.replace("%s",i.substring(u+1)):void 0},i.prototype.formatTime=function(e,t,n){var r=this.descriptions.timeFormat,i=parseInt(e),o=parseInt(t),s=parseInt(n),a=0<r.indexOf("H") ? "H" : "h",u=o;return"h"==a&&(0==u?u=12:12<u&&(u-=12)),r=r.replace("hh",_(u)).replace("h",u).replace("HH",_(o)).replace("H",o).replace("mm",_(i)).replace("m",i).replace("ss",_(s)).replace("s",s),this.use24HourTimeFormat||(r+=(0==o||12<o?"12"==o?this.descriptions.am:this.descriptions.pm:this.descriptions.am)),r},i.prototype.getSegmentDescription=function(e,t,n,r,i){var o="",s=e.split(",");if(1<s.length){for(var a="",u=0;u<s.length;u++){var c=s[u];if(1<u)a+=", ";var d=r(c);d.toString()==c?a+=d:a+=this.getSegmentDescription(c,t,n,r,i)}return t.replace("%s",a)}if(e.indexOf("*")!=e.length-1&&-1<e.indexOf("*")){var l=null;e.indexOf("*/")>-1?l=e.substring(e.indexOf("*/")+1):e.indexOf("*/")!=-1&&(l=e.substring(e.indexOf("/")+1));var h=t.replace(", ","").replace(" ","")+t.replace(", ",this.descriptions.commaX0ThroughX1.replace(", ","").replace("%s","").replace("%s","X0")).replace("%s",l);return h.endsWith("X0")||h.endsWith("X1")?h.substring(0,h.length-2):h}var f=[],m=s[0].split("/");if(1<m.length&&"//"!=s[0]){var p=m[0],y=m[1];if(p.indexOf("-")>-1)p=p.substring(0,p.indexOf("-"));else if("*"!=p&&p)return this.descriptions.commaEveryX0DaysStartingOnX1.replace("%s",n(y)).replace("%s",n(p));return this.descriptions.commaEveryX0.replace("%s",n(y))}if(e.indexOf("W")>-1&&-1==e.indexOf(","))return i?i(!0,null,null,null):null;if(e.indexOf("-")>-1&&"*"!=e&&"?"!=e&&-1==e.indexOf(",")&&-1==e.indexOf("/"))for(var v=s[0].split("-"),g=n(v[0]),a=n(v[1]),u=parseInt(g);u<=parseInt(a);u++)f.push(r(u.toString()));else if("*"!=e&&"?"!=e)for(var u=0;u<s.length;u++)f.push(r(s[u]));else return"";if(void 0===f)throw"unable to handle expression";if(1==f.length)return" "+t.replace("%s",f[0]);var b="";for(u=0;u<f.length;u++){if(u>0&&f.length>2&&u!=f.length-1)b+=",";else if(u>0)b+=f.length>2?", ":" ";var T=f[u];b+=T}return" "+t.replace("%s",b)},i.prototype.getMonthName=function(e){return this.descriptions.months[parseInt(e-1)]},i.prototype.getOrdinalValue=function(e){var t=parseInt(e);if(-1<t){var n=["zeroeth","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth","twentieth"];return t<=20?n[t]:void 0}},i.prototype.getRange=function(e,t,n){if(""==e)return"";var r=e.split("-"),i=parseInt(r[0]),o=parseInt(r[1]);t&&(i-=t),n&&(o-=n);for(var s=[],a=i;a<=o;a++)s.push(a);return s},i.prototype.setDayOfWeekStartIndexZero=function(e){this.dayOfWeekStartIndexZero=e},o.prototype.getOrdinalIndicator=function(e){return this.ordinalIndicator[parseInt(e)]},e.toString=function(e,t){return t=t||{},new i(e,t).getDescription(t.locale)},e.getOrdinalIndicator=function(e,t){return e},r.DefaultLocale="en",r.toString=function(e,t){return t=t||{},new i(e,t).getDescription(t.locale)},r.getNextOccurrence=n,r.getNextOccurrences=function(e,t,n){for(var r=t=t||{},i=0<arguments.length&&void 0!==e?e:"",o=1<arguments.length&&void 0!==t?t:{},s=2<arguments.length&&void 0!==n?n:1,a=[],u=(new Date).toISOString(),c=u,d=0;d<s;d++){r.currentDate=c;var l=this.getNextOccurrence(i,r);a.push(l),c=l.toISOString()}return a},e});
